# Filtered preprocessing configuration with density threshold
# Regions must have at least 50% non-missing data to be valid targets

# Data source paths
data_dir: "data/files"
cases_file: "data/files/flowmaps_cat_municipio_cases.csv"
wastewater_file: "data/files/wastewater_biomarkers_icra.csv"
region_metadata_file: "data/files/edar_muni_edges.nc"
population_file: "data/files/fl_population_por_municipis.csv"
mobility_path: "data/files/mobility.zarr"

# Temporal processing parameters - maximum coverage
start_date: "2020-03-01"
end_date: "2021-05-09"
forecast_horizon: 7
sequence_length: 14

# Feature processing options
min_flow_threshold: 10
wastewater_flow_mode: "concentration"

# Region filtering
min_density_threshold: 0.5  # Regions must have >= 50% non-missing data

# Alignment and validation options
alignment_strategy: "interpolate"
target_dataset: "cases"
crop_datasets: true
validate_alignment: true
generate_alignment_report: true

# Output configuration
output_path: "data/processed"
dataset_name: "filtered_v1"
compression: "blosc"

# Processing configuration
num_workers: 4
chunk_size: 14
memory_limit_gb: 8.0

# Graph construction options
graph_options:
  edge_strategy: "knn"
  k_neighbors: 8
  distance_threshold: 50.0
  include_self_loops: false

# Validation and quality control options
validation_options:
  max_missing_percentage: 0.15
  min_data_coverage: 0.75
  outlier_detection: true
  outlier_threshold: 3.0
  temporal_consistency_check: true
  spatial_consistency_check: true
  generate_plots: true
